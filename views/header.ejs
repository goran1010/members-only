<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="style.css" />
    <script type="module" src="main.js" defer></script>
    <title>Document</title>
  </head>
  <body>
    <%if (currentUser) { %>
    <h2>Hello: <%= currentUser.username %></h2>
    <form action="/users/log-out" method="post">
      <button type="submit">Log out</button>
    </form>
    <% } else { %>

    <form action="/users/create" method="post" class="create-user">
      <legend>Create a New User here:</legend>
      <div>
        <label for="username">Username: </label
        ><input type="text" id="username" name="username" required />
      </div>
      <div>
        <label for="first-name">First Name: </label
        ><input type="text" id="first-name" name="firstname" required />
      </div>
      <div>
        <label for="last-name">Last Name: </label
        ><input type="text" id="last-name" name="lastname" required />
      </div>
      <div>
        <label for="password">Password: </label
        ><input type="password" id="password" name="password" required />
      </div>
      <div>
        <label for="confirm-password">Confirm Password: </label
        ><input
          type="password"
          id="confirm-password"
          name="confirm-password"
          required
        />
      </div>
      <div>
        <label for="admin">Create as Admin ?</label>
        <input type="checkbox" name="admin" id="admin" />
        <label for="password_admin">Admin password: </label
        ><input type="password" name="password_admin" id="password_admin" />
      </div>
      <div>
        <button type="submit" id="create-user-button">Create User</button>
      </div>
    </form>
    <form action="/users/log-in" method="post" class="user-log-in">
      <legend>Already a user? Log in below:</legend>
      <div>
        <label for="username-log-in">Username: </label
        ><input type="text" id="username-log-in" name="username" required />
      </div>
      <div>
        <label for="password-log-in">Password: </label
        ><input type="password" id="password-log-in" name="password" required />
      </div>
      <div><button type="submit">Log in !</button></div>

      <script type="module" src="create-user.js"></script>
    </form>
    <% } if (currentUser && !currentUser.is_member) { %>
    <p>
      Would you like to become a member of our exclusive club and receive
      special privileges ? Click this link:
      <a href="/become-member">become a member</a> !
    </p>
    <% } %> <% if (currentUser) { %>
    <form action="/create-message" method="post" class="create-message">
      <div>
        <label for="title">Title: </label>
        <input type="text" id="title" name="title" required />
      </div>
      <div>
        <label for="text">Message: </label>
        <textarea
          name="text"
          id="text"
          placeholder="Your message goes here"
          required
        ></textarea>
      </div>
      <input type="hidden" name="author" value="<%= currentUser.id %>" />
      <button>Create message</button>
    </form>
    <% } %>
  </body>
</html>
